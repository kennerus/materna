<!-- start html_open.html-->
<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <!--для масштабируемых моделей-->
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">

    <title>Матерна</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link href="css/libs.min.css" rel="stylesheet" type="text/css">
    <link href="css/styles.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="css/fontello.css">
    <link rel="stylesheet" href="css/slick-theme.css">
    <link rel="stylesheet" href="css/slick.css">
    <link rel="stylesheet" href="css/jquery.fancybox.css">
</head>
<body>
<!-- open .header -->
<!-- end html_open.html-->

<!-- start header.html-->
<!-- open .header-->
<header class="header">
	<div class="header__content-wrap wrap">
		<div class="header__logo">
			<a href="index.html"><img src="img/logo.png"></a>
			<h3>Ближе всего к маме</h3>
		</div>
		<div class="header__search">
			<h2>Интернет магазин детского питания</h2>
			<p>В наличии в Москве с доставкой по России</p>
			<label for="search">Москва, ул. Неверовского, д.10 стр.4, офис 10, метро «Парк Победы»</label>
			<input id="search" type="text">
			<button type="submit">Поиск</button>
		</div>
		<div class="header__callback">
			<div class="header__callback-call">
				<p>Звоните: <strong>+7 (499) 948-88-00 </strong></p>
				<p>Пишите только:
					<img src="img/what-ico.png" width="20" height="20" alt="">
					<img src="img/viber-ico.png" width="20" height="20" alt="">
				</p>
				<p><strong> +7 (925) 732-84-11  </strong></p>
			</div>
			<div class="header__callback-sub">
				<p>Ежедневно с 9:00 до 19:00 </p>
				<p>Подписывайтесь: <a href="https://www.instagram.com/"><img src="img/insta-ico-h.png" width="20" height="20" alt=""></a>
				<a href="https://facebook.com/"><img src="img/fb-ico-h.png" width="18" height="18" alt=""></a>
				<a href="https://vk.com/"><img src="img/vk-ico-h.png" width="20" height="20" alt=""></a></p>
			</div>
		</div>
	</div>
	<div class="header__nav-wrap">
		<div class="wrap">
			<div class="header__nav">
                <div id="nav-icon1">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <nav class="header__nav-menu">
                    <a href="about.html">О Матерне</a>
                    <a href="catalogue.html">Каталог товаров</a>
                    <a href="delivery.html">Заказ и доставка</a>
                    <a href="feedbacks.html">Отзывы</a>
                    <a href="help.html">В помощь маме</a>
                    <a href="contacts.html">Контакты</a>
                    <a class="cart" href="cart.html"><i class="demo-icon icon-basket"></i>Корзина (0 товаров)</a>
                </nav>
            </div>
		</div>
	</div>
</header>
<!-- close .header -->

<!-- end header.html-->

<!-- main container-->

<!-- start cart.html-->
<div class="main prod">
	<div class="product">
		<div class="product__wrap wrap">
			<div class="product__breadcrumps">
				<ul>
					<li><a href="index.html">Главная</a> <span>></span></li>
					<li><a class="active" href="catalogue.html">Корзина</a></li>
				</ul>
			</div>
			<div class="product__content-container">
				<table class="cart-table">
					<thead>
						<tr>
							<th>Фото</th>
							<th>Товар</th>
							<th>Цена</th>
							<th>Количество</th>
							<th>Общая сумма</th>
						</tr>
					</thead>
					<tfoot>
						<tr>
							<td class="cart__full-price" colspan="5">Итого: <span>7500 руб.</span></td>
						</tr>
					</tfoot>
					<tbody>
						<tr>
							<td class="cart__img">
								<div>
									<img src="img/cart-item.jpg" alt="">
								</div>
							</td>
							<td class="cart__desc">
								<a href="product.html" class="cart-table__item">Молочная смесь <span class="uppercase">Materna Extra Care</span></a>
								<p class="item-desc">улучшенная формула, от 6 до 12 месяцев, 700г</p>
							</td>
							<td class="cart__price">122500 руб.</td>
							<td class="amount__calc">
								<div>
									<span class="minus">&#45;</span><input type="text" value="1"><span class="plus">&#43;</span>
								</div>
							</td>
							<td class="cart__items-price">
								<div>
									<span class="cart-table__final-const">212500 руб.</span>
									<span class="cart-table__delete"><img src="img/delete.png" alt=""></span>
								</div>
							</td>
						</tr>
						<tr>
							<td class="cart__img">
								<div>
									<img src="img/cart-item.jpg" alt="">
								</div>
							</td>
							<td class="cart__desc">
								<a href="product.html" class="cart-table__item">Молочная смесь <span class="uppercase">Materna Extra Care</span></a>
								<p class="item-desc">улучшенная формула, от 6 до 12 месяцев, 700г</p>
							</td>
							<td class="cart__price">2500 руб.</td>
							<td class="amount__calc">
								<div>
									<span class="minus">&#45;</span><input type="text" value="1"><span class="plus">&#43;</span>
								</div>
							</td>
							<td class="cart__items-price">
								<div>
									<span class="cart-table__final-const">2500 руб.</span>
									<span class="cart-table__delete"><img src="img/delete.png" alt=""></span>
								</div>
							</td>
						</tr>
						<tr>
							<td class="cart__img">
								<div>
									<img src="img/cart-item.jpg" alt="">
								</div>
							</td>
							<td class="cart__desc">
								<a href="product.html" class="cart-table__item">Молочная смесь <span class="uppercase">Materna Extra Care</span></a>
								<p class="item-desc">улучшенная формула, от 6 до 12 месяцев, 700г</p>
							</td>
							<td class="cart__price">2500 руб.</td>
							<td class="amount__calc">
								<div>
									<span class="minus">&#45;</span><input type="text" value="1"><span class="plus">&#43;</span>
								</div>
							</td>
							<td class="cart__items-price">
								<div>
									<span class="cart-table__final-const">2500 руб.</span>
									<span class="cart-table__delete"><img src="img/delete.png" alt=""></span>
								</div>
							</td>
						</tr>
					</tbody>
				</table>
				<section class="multi-step-form">

					<h2>Для завершения заказа заполните форму - все поля обязательные</h2>

					<div class="steps">
						<button class="step-active" type="button" disabled>Шаг 1 - Контактные данные</button>
						<button class="right35" type="button" disabled>Шаг 2 - Доставка</button>
						<button class="right70" type="button" disabled>Шаг 3 - Оплата</button>
					</div>

					<form id="cart_form" action="#" method="post">
						
						<div  aria-label="Step One" tabindex="-1" class="fieldset" id="step-1">
							<h3>Укажите контактные данные</h3>
							<div id="messageBox">
							</div>
							<input id="name" type="text" name="name" placeholder="Ваше имя*" required>
							<input id="tel" type="tel" name="tel" placeholder="Ваш телефон*" required>
							<input id="email" type="email" name="email" placeholder="Ваш e-mail*" required>
							<button class="btn-next" type="button" aria-controls="step-2">Перейти к доставке</button>
						</div>
						
						<div aria-label="Step Two" tabindex="-1" class="fieldset" id="step-2">
							<h3>Способ доставки</h3>
							<div id="messageBox2"></div>
							<div class="radio__container">
								<input id="storage" type="radio" name="radio" value="storage">
								<label for="storage"><strong class="uppercase">Cамовывоз со склада</strong> (г. Москва, ул. Неверовского, д.10 стр.4, офис 10, метро «Парк Победы»).</label>
							</div>
												
							<div class="radio__container">
								<input id="courier" type="radio" name="radio" value="courier">
								<label for="courier"><strong class="uppercase">Доставка курьером</strong> по Москве 350р. <span class="fastest-delivery">Самая быстрая доставка <img src="img/truck.png" alt=""></span></label>
							</div>
												
							<div class="radio__container">
								<input id="region" type="radio" name="radio" value="region">
								<label for="region">Доставка в другой регион.*</label>
							</div>
							<div class="radio__container">
								<input id="agreement" type="radio" name="radio" value="agreement">
								<label for="agreement">Даю согласие на обработку моих персональных данных в соответствии с <a href="#">Политикой конфиденциальности</a></label>
							</div>
												
							<div class="radio__container">
								<input id="offers" type="radio" name="radio" value="offers">
								<label for="offers">Хочу получать специальные предложения.</label>
							</div>
							<p>* Доставка в другие регионы осуществляется курьерским службами Dimex, Dostavista, EMS и транспортными компаниями "Деловые линии" и "КИТ".</p>
							<button class="btn-next" type="button" id="send_contact" aria-controls="step-3">Перейти к оплате</button>

						</div>
						
						<div aria-label="Step Three" tabindex="-1" class="fieldset" id="step-3">
							<p>При получении наличными курьеру</p>
							<p class="card_pay">Возможность оплаты картой уточняйте при заказе</p>
							<button type="submit" id="submit_form" data-type="submit">Оплатить</button>
						</div>
						
					</form>
				</section>


<!-- 
HTML Requirements

1. Include .multi-step-form
2. Define parents e.g. fieldset
3. Each parent should own a unique ID with aria-label
4. Each next/prev button owns aria-controls which points to unique ID of parents
5. For validation each field should own required attribute

<section class="multi-step-form">
	<form>

		<fieldset aria-label="Step One" tabindex="-1" id="step-1">
			...
			<button class="btn-next" type="button" aria-controls="step-2">Next</button>
		</fieldset>

		<fieldset aria-label="Step Two" tabindex="-1" id="step-2">
			...
			<button class="btn-prev" type="button" aria-controls="step-1">Previous</button>
			<button class="btn-next" type="button" aria-controls="step-3">Next</button>
		</fieldset>

		<fieldset aria-label="Step Three" tabindex="-1" id="step-3">
			...
			<button type="submit">Submit</button>
			<button class="btn-edit" type="button">Edit</button>
			<button type="reset">Start Over</button>
		</fieldset>

	</form>
</section>
-->
			</div>
		</div>
<!-- start icons.html-->
<div class="icons">
	<div class="icons__wrap wrap">
		<div class="icons__crown">
			<img src="img/crown-ico.png" alt="Оригинальная продукция">
			<p>Оригинальная продукция</p>
		</div>
		<div class="icons__tablet">
			<img src="img/tablet-ico.png" alt="Всегда в наличии">
			<p>Наличие на складе</p>
		</div>
		<div class="icons__hand">
			<img src="img/hand-ico.png" alt="Оплата при получении">
			<p>Оплата при получении</p>
		</div>
	</div>
</div>
<!-- end icons.html-->
	</div>
</div>

<!-- end cart.html-->

<!-- close container-->

<!-- start footer.html-->
<footer class="footer">
    <div class="footer__wrap wrap">
    	<div class="footer__contacts">
    		<div class="footer__logo">
    			<a href="index.html"><img src="img/logo.png"></a>
    		</div>
    		<div class="footer__social">
    			<h2>Присоединяйтесь</h2>
    			<div class="footer__social-icons">
    				<a href="https://vk.com/"><img src="img/vk-ico.png" alt="VK"></a>
    				<a href="https://ok.ru/"><img src="img/ok-ico.png" alt="OK"></a>
    				<a href="https://www.facebook.com/"><img src="img/fb-ico.png" alt="FB"></a>
    				<a href="https://instagram.com/"><img src="img/insta-ico.png" alt="Insta"></a>
    			</div>
    		</div>
    		<div class="footer__address">
    			<div>
    				<img src="../img/mark-ico.png" alt="">
    			</div>
    			<div>
    				<h4>Москва </h4>
    				<p>ул. Неверовского, д.10 стр.4, офис 10, метро «Парк Победы»</p>
    			</div>
    		</div>
    		<div class="footer__phone">
    			<div class="schedule">
    				<div><i class="demo-icon icon-phone-1"></i>    </div>
    				<div class="every-day">
    					<p>Ежедневно с 9:00 до 19:00  <br> <span>+7 (499) 948-88-00    </span></p>
    				</div>
    			</div>
    			<p>
    				<button id="order" href="#">Заказать звонок</button>
    			</p>
    			<div class="margin-top20">
    				<img src="img/what-ico.png" width="25" height="25">
    				<img src="img/viber-ico.png" width="25" height="25">
    				<span>+7 (925) 732-84-11  </span>
    			</div>
    		</div>
    	</div>
    	<div class="footer__nav">
    		<nav class="footer__nav-menu">
                <a href="about.html">О Матерне</a>
                <a href="products.html">Каталог товаров</a>
                <a href="delivery.html">Заказ и доставка</a>
                <a href="feedbacks.html">Отзывы</a>
                <a href="help.html">В помощь маме</a>
                <a href="contacts.html">Контакты</a>
            </nav>
    	</div>
    	<div class="footer__alert">
    		<p>При использовании продуктов-заменителей грудного молока и продуктов, включенных в рацион  ребенка в течение его первого года жизни, необходима консультация специалиста.</p>
    	</div>
    </div>
</footer>
<!-- end footer.html-->

<!-- start html_close_cart.html-->
<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
<script src="js/jquery.fancybox.min.js"></script>
<!--для подключения jquary-плагинов-->
<script src="js/slick.js"></script>
<script type="text/javascript"  src="https://cdn.jsdelivr.net/npm/jquery-validation@1.17.0/dist/jquery.validate.min.js"></script>


<script>
$('#nav-icon1').click(function() {
	$(this).toggleClass('open');
	$('.header__nav-menu').toggleClass('expand');
});

$('.minus').click(function () {
	var $input = $(this).parent().find('input');
	var count = parseInt($input.val()) - 1;
	count = count < 1 ? 1 : count;
	$input.val(count);
	$input.change();
	return false;
});

$('.plus').click(function () {
	var $input = $(this).parent().find('input');
	$input.val(parseInt($input.val()) + 1);
	$input.change();
	return false;
});
	/**
 * @name Multi-step form - WIP
 * @description Prototype for basic multi-step form
 * @deps jQuery, jQuery Validate
 */

var app = {

	init: function(){
		this.cacheDOM();
		this.setupAria();
		this.nextButton();
		this.prevButton();
		this.validateForm();
		this.startOver();
		this.editForm();
		this.killEnterKey();
		this.handleStepClicks();
	},

	cacheDOM: function(){
		if($(".multi-step-form").size() === 0){ return; }
		this.$formParent = $(".multi-step-form");
		this.$form = this.$formParent.find("form");
		this.$formStepParents = this.$form.find(".fieldset"),

		this.$nextButton = this.$form.find(".btn-next");
		this.$prevButton = this.$form.find(".btn-prev");
		this.$editButton = this.$form.find(".btn-edit");
		this.$resetButton = this.$form.find("[type='reset']");

		this.$stepsParent = $(".steps");
		this.$steps = this.$stepsParent.find("button");
	},

	htmlClasses: {
		activeClass: "step-active",
		hiddenClass: "hidden",
		visibleClass: "visible",
		editFormClass: "edit-form",
		animatedVisibleClass: "animated fadeIn",
		animatedHiddenClass: "animated fadeOut",
		animatingClass: "animating"
	},

	setupAria: function(){

		// set first parent to visible
		this.$formStepParents.eq(0).attr("aria-hidden",false);

		// set all other parents to hidden
		this.$formStepParents.not(":first").attr("aria-hidden",true);

		// handle aria-expanded on next/prev buttons
		app.handleAriaExpanded();

	},

	nextButton: function(){

		this.$nextButton.on("click", function(e){

			e.preventDefault();

			// grab current step and next step parent
			var $this = $(this),
					currentParent = $this.closest(".fieldset"),
					nextParent = currentParent.next();

					// if the form is valid hide current step
					// trigger next step
					if(app.checkForValidForm()){
						currentParent.removeClass(app.htmlClasses.visibleClass);
						app.showNextStep(currentParent, nextParent);
					}

		});
	},

	prevButton: function(){

		this.$prevButton.on("click", function(e){

			e.preventDefault();

			// grab current step parent and previous parent
			var $this = $(this),
					currentParent = $(this).closest(".fieldset"),
					prevParent = currentParent.prev();

					// hide current step and show previous step
					// no need to validate form here
					currentParent.removeClass(app.htmlClasses.visibleClass);
					app.showPrevStep(currentParent, prevParent);

		});
	},

	showNextStep: function(currentParent,nextParent){

		// hide previous parent
		currentParent
			.addClass(app.htmlClasses.hiddenClass)
			.attr("aria-hidden",true);

		// show next parent
		nextParent
			.removeClass(app.htmlClasses.hiddenClass)
			.addClass(app.htmlClasses.visibleClass)
			.attr("aria-hidden",false);

		// focus first input on next parent
		nextParent.focus();

		// activate appropriate step
		app.handleState(nextParent.index());

		// handle aria-expanded on next/prev buttons
		app.handleAriaExpanded();

	},

	showPrevStep: function(currentParent,prevParent){

		// hide previous parent
		currentParent
			.addClass(app.htmlClasses.hiddenClass)
			.attr("aria-hidden",true);

		// show next parent
		prevParent
			.removeClass(app.htmlClasses.hiddenClass)
			.addClass(app.htmlClasses.visibleClass)
			.attr("aria-hidden",false);

		// send focus to first input on next parent
		prevParent.focus();

		// activate appropriate step
		app.handleState(prevParent.index());

		// handle aria-expanded on next/prev buttons
		app.handleAriaExpanded();

	},

	handleAriaExpanded: function(){

		/*
			Loop thru each next/prev button
			Check to see if the parent it conrols is visible
			Handle aria-expanded on buttons
		*/
		$.each(this.$nextButton, function(idx,item){
			var controls = $(item).attr("aria-controls");
			if($("#"+controls).attr("aria-hidden") == "true"){
				$(item).attr("aria-expanded",false);
			}else{
				$(item).attr("aria-expanded",true);
			}
		});

		$.each(this.$prevButton, function(idx,item){
			var controls = $(item).attr("aria-controls");
			if($("#"+controls).attr("aria-hidden") == "true"){
				$(item).attr("aria-expanded",false);
			}else{
				$(item).attr("aria-expanded",true);
			}
		});

	},

	validateForm: function(){
		// jquery validate form validation
		this.$form.validate({
				rules : {
	                name : "required",
	                email : {
	                    required : true,
	                    email : true
	                },
	                tel : {
	                	required : true,
	                	number : true
	                },
	                radio : {
	                	required : true
	                }
	            },
		        messages: {
		        	name: " ",
		        	email: {
		        		required: " "
		        	},
		        	tel : {
		            	required : " "
		            },
		            radio : {
		            	required: "Пожалуйста выберите способ доставки"
		            }
		        },
			ignore: ":hidden", // any children of hidden desc are ignored
			errorLabelContainer: "#messageBox, #messageBox2",
			  showErrors: function(errorMap, errorList) {
			    $("#messageBox").html("<p>Заполните все поля</p>");
			    this.defaultShowErrors();
			  },
			errorElement: "p", // wrap error elements in span not label
			invalidHandler: function(event, validator){ // add aria-invalid to el with error
				$.each(validator.errorList, function(idx,item){
					if(idx === 0){
						$(item.element).focus(); // send focus to first el with error
					}
					$(item.element).attr("aria-invalid",true); // add invalid aria
				})
			},
			submitHandler: function(form) {
				alert("Форма отправлена!");
		    // form.submit();
		  }
		});
	},

	checkForValidForm: function(){
		if(this.$form.valid()){
			return true;
		}
	},

	startOver: function(){

		var $parents = this.$formStepParents,
				$firstParent = this.$formStepParents.eq(0),
				$formParent = this.$formParent,
				$stepsParent = this.$stepsParent;

				this.$resetButton.on("click", function(e){

					// hide all parents - show first
					$parents
						.removeClass(app.htmlClasses.visibleClass)
						.addClass(app.htmlClasses.hiddenClass)
						.eq(0).removeClass(app.htmlClasses.hiddenClass)
						.eq(0).addClass(app.htmlClasses.visibleClass);

						// remove edit state if present
						$formParent.removeClass(app.htmlClasses.editFormClass);

						// manage state - set to first item
						app.handleState(0);

						// reset stage for initial aria state
						app.setupAria();

						// send focus to first item
						setTimeout(function(){
							$firstParent.focus();
						},200);

				}); // click

	},

	handleState: function(step){
		this.$steps.eq(step).prevAll().removeAttr("disabled");
		this.$steps.eq(step).addClass(app.htmlClasses.activeClass);

		// restart scenario
		if(step === 0){
			this.$steps
				.removeClass(app.htmlClasses.activeClass)
				.attr("disabled","disabled");
			this.$steps.eq(0).addClass(app.htmlClasses.activeClass)
		}
		
		else if (step === 1) {
			console.log(step);
			console.log(this.$steps);
			this.$steps.eq(0).removeClass(app.htmlClasses.activeClass)
		}

		else if (step === 2) {
			console.log(step);
			console.log(this.$steps);
			this.$steps.eq(1).removeClass(app.htmlClasses.activeClass)
		}

	},

	editForm: function(){
		var $formParent = this.$formParent,
				$formStepParents = this.$formStepParents,
				$stepsParent = this.$stepsParent;

				this.$editButton.on("click",function(){
					$formParent.toggleClass(app.htmlClasses.editFormClass);
					$formStepParents.attr("aria-hidden",false);
					$formStepParents.eq(0).find("input").eq(0).focus();
					app.handleAriaExpanded();
				});
	},

	killEnterKey: function(){
		$(document).on("keypress", ":input:not(textarea,button)", function(event) {
			return event.keyCode != 13;
		});
	},

	handleStepClicks: function(){

		var $stepTriggers = this.$steps,
				$stepParents = this.$formStepParents;

				$stepTriggers.on("click", function(e){

					e.preventDefault();

					var btnClickedIndex = $(this).index();

						// kill active state for items after step trigger
						$stepTriggers.nextAll()
							.removeClass(app.htmlClasses.activeClass)
							.attr("disabled",true);

						// activate button clicked
						$(this)
							.addClass(app.htmlClasses.activeClass)
							.attr("disabled",false)

						// hide all step parents
						$stepParents
							.removeClass(app.htmlClasses.visibleClass)
							.addClass(app.htmlClasses.hiddenClass)
							.attr("aria-hidden",true);

						// show step that matches index of button
						$stepParents.eq(btnClickedIndex)
							.removeClass(app.htmlClasses.hiddenClass)
							.addClass(app.htmlClasses.visibleClass)
							.attr("aria-hidden",false)
							.focus();

				});

	}

};

app.init();

</script>

</body>
</html>
<!-- end html_close_cart.html-->
